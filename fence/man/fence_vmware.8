.TH fence_vmware 8

.SH NAME
fence_vmware - I/O Fencing agent for VMware virtual machines

.SH SYNOPSIS
.B
fence_vmware
[\fIOPTION\fR]...

.SH DESCRIPTION
fence_vmware is an I/O Fencing agent which can be used with the VMware ESX,
VMware ESXi or VMware Server to fence virtual machines.

Before you can use this agent, it must be installed VI Perl Toolkit or vmrun
command on every node you want to make fencing.

VI Perl Toolkit is preferred for VMware ESX/ESXi and Virtual Center. Vmrun
command is only solution for VMware Server 1/2 (this command will works against
ESX/ESXi 3.5 up2 and VC up2 too, but not cluster aware!) and is available as part of
VMware VIX API SDK package. VI Perl and VIX API SDK are both available from
VMware web pages (not int RHEL repository!).

You can specify type of VMware you are connecting to with \fB-d\fP switch
(or \fIvmware_type\fR for stdin). Possible values are esx, server2 and server1.
Default value is esx, which will use VI Perl. With server1 and server2, vmrun command
is used.

After you have successfully installed VI Perl Toolkit or VIX API, you should
be able to run fence_vmware_helper (part of this agent) or vmrun command.
This agent supports only vmrun from version 2.0.0 (VIX API 1.6.0).

fence_vmware accepts options on the command line as well as from stdin.
Fenced sends parameters through stdin when it execs the agent. fence_vmware
can be run by itself with command line options. This is useful for testing
and for turning outlets on or off from scripts.

.SH HOST NAME/IP ADDRESS SPECIFICATION
Host name can include port in standard notation host_name:port.
Specifying port isn't mandatory, but you must use it, if you try use this agent
against VMware server 2.0.0 with default options, where https console runs on port
8333. In case of ESX/ESXi, you don't need to specify port, because
default configuration runs https on standard (443) port.

.SH OPTIONS
.TP
\fB-a\fP \fIIPaddress\fR
IP address or hostname of ESX/ESXi host machine. See (see
.SM
.B "HOST NAME/IP ADDRESS SPECIFICATION"
above).
.TP
\fB-h\fP
Print out a help message describing available options, then exit.
.TP
\fB-l\fP \fIlogin\fR
Login name to VMware administration console.
.TP
\fB-o\fP \fIaction\fR
The action required.  This can be reboot (default), status, off, on, list
or monitor.
.TP
\fB-p\fP \fIpassword\fR
Password for login for VMware administration console.
.TP
\fB-S\fP \fIscript\fR
Script to run to retrieve password for VMware administration console.
.TP
\fB-n\fP \fIname\fR
Name of virtual machine to fence (ie. "test" for ESX with VI Perl or
"[datastore1] test/test.vmx" for Server 2) which is returned by list command.
.TP
\fB-e\fP \fIcommand\fR
Location of fence_vmware_helper or vmrun command. Default is fence_vmware_helper or
/usr/bin/vmrun, but if you are using nonstandard location, you may find this switch useful.
.TP
\fB-d\fP \fItype\fR
Type of VMware product you are trying to connect. This can be esx, server1 or server2.
.TP
\fB-s\fP \fIdatacenter\fR
VMware datacenter to use. This can be used to filter guests to operate. Without specifying,
guests from all datacenters will be used. Parameter can be used only with VI Perl helper
(type is esx).
.TP
\fB-v\fP
Verbose. Record session to stdout, or debug file if specified (see -D).
.TP
\fB-D\fP
Specifies file, where will be written debug messages from session.
.TP
\fB-V\fP
Print out a version message, then exit.

.SH STDIN PARAMETERS
.TP
\fIagent = < param >\fR
This option is used by fence_node(8) and is ignored by fence_vmware.
.TP
\fIipaddr = < hostname | ip >\fR
IP address or hostname of ESX/ESXi host machine. See (see
.SM
.B "HOST NAME/IP ADDRESS SPECIFICATION"
above).
.TP
\fIlogin = < param >\fR
Login name to VMware administration console.
.TP
\fIoption = < param >\fR
The action required.  This can be reboot (default), status, off, on, list
or monitor.
.TP
\fIpasswd = < param >\fR
Password for login for VMware administration console.
.TP
\fIpasswd_script = < param >\fR
Script to run to retrieve password for VMware administration console.
.TP
\fIport = < param >\fR
Name of virtual machine to fence (ie. "test" for ESX with VI Perl or
"[datastore1] test/test.vmx" for Server 2) which is returned by list command.
.TP
\fIexec = < param >\fR
Location of fence_vmware_helper or vmrun command. Default is fence_vmware_helper or
/usr/bin/vmrun, but if you are using nonstandard location, you may find this switch useful.
.TP
\fIvmware_type = < param >\fR
Type of VMware product you are trying to connect. This can be esx, server1 or server2.
.TP
\fIvmware_datacenter = < param >\fR
VMware datacenter to use. This can be used to filter guests to operate. Without specifying,
guests from all datacenters will be used. Parameter can be used only with VI Perl helper
(type is esx).
.TP
\fIverbose = < param >\fR
Verbose.  Record session to stdout, or debug file if specified (see debug).
.TP
\fIdebug = < param >\fR
Specifies file, where will be written debug messages from session.

.SH SEE ALSO
fence(8), fence_node(8)
