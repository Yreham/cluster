.TH gfs2_tool 8

.SH NAME
gfs2_tool - interface to gfs2 ioctl/sysfs calls

.SH SYNOPSIS
.B gfs2_tool
\fICOMMAND\fR [\fIOPTION\fR]...

.SH DESCRIPTION
gfs2_tool is an interface to a variety of the GFS2 ioctl/sysfs calls.

.SH COMMANDS
.TP
\fBclearflag\fP \fIFlag\fR \fIFile1\fR \fIFile2\fR \fI...\fR 
Clear an attribute flag on a file. See \fBsetflag\fP for available flags.
.TP
\fBdf\fP \fIMountPoint\fR 
Print out a space usage summary of a given filesystem.  The information
printed is more detailed than a standard "df".
.\".TP
.\"\fBflush\fP \fIFile\fR
.\"Sync out any dirty data for a file and drop its lock.
.TP
\fBfreeze\fP \fIMountPoint\fR
Freeze (quiesce) a GFS2 cluster.
.TP
\fBgetargs\fP \fIMountPoint\fR
Get the GFS-specific mount arguments used to mount a filesystem.
.\".TP
.\"\fBgetsb\fP \fIMountPoint\fR
.\"Print out the superblock of a mounted filesystem.
.TP
\fBgettune\fP \fIMountPoint\fR
Print out the current values of the tuning parameters in a running
filesystem.
.TP
\fBjournals\fP \fIMountPoint\fR
Print out information about the journals in a mounted filesystem.
.\".TP
.\"\fBjindex\fP \fIMountPoint\fR
.\"Print out the journal index of a mounted filesystem.
.\".TP
.\"\fBlayout\fP \fIFile\fR \fI[buffersize]\fR
.\"Print out on-disk layout information about a file or directory.
.\"Buffersize is the size of the buffer (in bytes) that gfs2_tool allocates
.\"to store the file's metadata during processing.  It defaults to 4194304
.\"bytes.  If you are printing a very big directory you may need to specify
.\"a bigger size.
.TP
\fBlist\fP
List the currently mounted GFS2 filesystems.  Each line represents
a filesystem.  The columns represent (in order): 1) An identifier that
represents the mounted filesystem. 2) The name of the
device that holds the filesystem (well, the name as the Linux
kernel knows it).
.TP
\fBlockdump\fP \fIMountPoint\fR
Print out information about the locks this machine holds for a given
filesystem.
.\".TP
.\"\fBmargs\fP \fIarguments\fR
.\"This loads arguments into the module what will override the mount
.\"options passed with the -o field on the next mount.  See gfs2_mount(8).
.\".TP
.\"\fBquota\fP \fIMountPoint\fR
.\"Print out the quota file of a mounted filesystem.  Also see
.\"the "gfs2_quota list" command.
.\".TP
.\"\fBrindex\fP \fIMountPoint\fR
.\"Print out the resource group index of a mounted filesystem.
.TP
\fBsb\fP \fIdevice\fR \fBproto\fP \fI[newvalue]\fR
View (and possibly replace) the name of the locking protocol in the
file system superblock.  The file system shouldn't be mounted by any
client when you do this.
.TP
\fBsb\fP \fIdevice\fR \fBtable\fP \fI[newvalue]\fR
View (and possibly replace) the name of the locking table in the
file system superblock.  The file system shouldn't be mounted by any
client when you do this.
.TP
\fBsb\fP \fIdevice\fR \fBondisk\fP \fI[newvalue]\fR
View (and possibly replace) the ondisk format number in the
file system superblock.  The file system shouldn't be mounted by any
client when you do this.  No one should have to use this.
.TP
\fBsb\fP \fIdevice\fR \fBmultihost\fP \fI[newvalue]\fR
View (and possibly replace) the multihost format number in the
file system superblock.  The file system shouldn't be mounted by any
client when you do this.  No one should have to use this.
.TP
\fBsb\fP \fIdevice\fR \fBuuid\fP \fI[newvalue]\fR
View (and possibly replace) the uuid in the file system superblock.
The file system shouldn't be mounted by any client when you do this.
The new uuid value should be in the standard uuid format.  For
example: 1AEA8269-15C5-72BD-6D83-8720B17AA4EE
.TP
\fBsb\fP \fIdevice\fR \fBall\fP
Print out the superblock.
.TP
\fBsetflag\fP \fIFlag\fR \fIFile1\fR \fIFile2\fR \fI...\fR 
Set an attribute flag on a file.  The currently supported flags are 
jdata, immutable, appendonly, noatime, and sync.  In most cases, the 
chattr command may be used rather than gfs2_tool to set attributes.

The \fIjdata\fR flag causes all the data written to a file
to be journaled.  If the \fIjdata\fR flag is set for a directory,
all files and directories subsequently created within that directory
are also journaled.  This behavior replaces the old \fIinherit_jdata\fR
flag from gfs.  Same as chattr +j.

The \fIimmutable\fR flag marks the file immutable. The behavior is 
similar to the immutable flag in the ext2/3 filesystems.  All write 
access is denied.  Same as chattr +i.

The \fIappendonly\fR flag causes all data to be written at the end of 
the file.  Same as chattr +a.

The \fInoatime\fR flag disables updates to the file's access time.
Same as chattr +A.

The \fIsync\fR flag causes data written to the file to be sync'ed to 
stable storage immediately.  Same as chattr +S.
.TP
\fBsettune\fP \fIMountPoint\fR \fIparameter\fR \fInewvalue\fR
Set the value of tuning parameter.  Use \fBgettune\fP for a listing of 
tunable parameters.
.TP
\fBshrink\fP \fIMountPoint\fR
Causes any unused locks to be thrown out of memory.
.\".TP
.\"\fBstat\fP \fIFile\fR
.\"Print out extended stat information about a file.
.TP
\fBunfreeze\fP \fIMountPoint\fR
Unfreeze a GFS2 cluster.
.TP
\fBversion\fP
Print out the version of GFS2 that this program goes with.
.TP
\fBwithdraw\fP \fIMountPoint\fR
Cause GFS2 to abnormally shutdown a given filesystem on this node.

